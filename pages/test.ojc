# _ = require 'underscore'

_plugins = require './_plugins'
# _cssFromObject = (cssMap, isDebug = 0) ->
#   newline = if isDebug then '\n' else ''
#   space = if isDebug then ' ' else ''
#   inline = !isDebug
#   indent = isDebug
#   css = ''
#   for selector, styles of cssMap
#     rules = _styleFromObject styles, inline:inline, indent:indent
#     css += "#{selector}#{space}{#{newline}#{rules}}#{newline}"
#   css

# domcss = (obj) ->
#   css = _cssFromObject obj
#   console.log "css: ", css
# `window.domcss = domcss`
###
    h1('Welcome to OJ')

    list = BulletList(
      "Everything is Javascript",
      "Objects create html"
    )

    list.add("Objects live edit the dom");
    list.add("CSS works!");

    css({
      h1:{
        color:'orange'
      }
    });

    var btn = Button('Add item',{click:function(){
      list.add('Event binding works!')
    }})

    btn.click()
###
module.exports = oj ->

  doctype 5
  html lang:'en', ->
    head ->
      title 'Test'

      link href:'styles/reset.css', rel:'stylesheet', type:'text/css'
      link href:'styles/bootstrap.css', rel:'stylesheet', type:'text/css'
      link href:'styles/jquery-ui-1.10.3.custom.css', rel:'stylesheet', type:'text/css'

      script src: 'scripts/jquery.js', type:'text/javascript'
      script src: 'scripts/underscore.js', type:'text/javascript'
      script src: 'scripts/backbone.js', type:'text/javascript'
      script src: 'scripts/ace/ace.js', type:'text/javascript'

      script src: 'scripts/bootstrap.js', type:'text/javascript'

      script src: 'scripts/jquery-ui-1.10.3.custom.js', type:'text/javascript'
      script src: 'scripts/jquery.ba-resize.min.js', type:'text/javascript'

      meta charset:'UTF-8'
      meta 'http-equiv':"X-UA-Compatible", content:'IE=edge,chrome=1'

    body ->
      if oj.isClient
        CodeModel = Backbone.Model.extend()
        code = new CodeModel({code: 'function test(){\n}\nvar foo = 5;'});
      h1 'This is a header'
      h2 'header 2'
      p 'Paragraph goes here. Looking good'

      table c:'table table-striped', ->
        tr ->
          td 1
          td 2
          td 3
        tr ->
          td 4
          td 5
          td 6

      oj.TwitterFollowButton(large:true)

      ae = AceEditor()
        # model: code
        # key: 'code'
        # wrapLimit: '23'
        # mode: 'javascript'
        # theme: 'solarized_light'
        # padding: 20
      # ae.$el.css border:'1px solid orange'
      `window.ae = ae;`

      # css
      #   '.ace_line':
      #     height: '20px !important'


      # domcss div:color:'red'

      # t = TryEditor
      #   js: """
      #     div('this should work');

      # `window.t = t`
      # ae2 = AceEditor
      #   model: code
      #   key: 'code'
      #   wrapLimit: 30
      #   mode: 'javascript'
      #   theme: 'solarized_dark'

      # tb = TextArea value:'value default', model: code, key:'code', style:
      #   width: 200
      #   height: 200
      #   fontSize: 14

      # TwitterFollowButton 'evanmoran', showUsername:false
      # TwitterFollowButton('evanmoran', {showCount: false, large:false});
      # TwitterFollowButton 'evanmoran'
      # TwitterFollowButton 'iamthelawton'

      # VimeoVideo()

      # `window.ae2 = ae2;`

      # br()

      # `window.vid = vid;`


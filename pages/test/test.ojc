# _ = require 'underscore'

lib = require './_lib'

module.exports = ->
  html ->
    head ->
      title 'This is the title'
      script href:'http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js'
      script href:'http://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js'
    body ->



      # Define backbone UserModel and UserCollection
      class UserModel extends Backbone.Model
      class UserCollection extends Backbone.Collection

      # Initialize collection
      user = new UserModel name:'Sid', isApproved:false
      user2 = new UserModel name:'John', isApproved:true
      user3 = new UserModel name:'Evan', isApproved:false

      users = new UserCollection [user,user2,user3]

      List collection:users, each: (v) ->
        approved = if v.get('isApproved') then 'approved' else 'not approved'
        span "#{v.get('name')} is #{approved}!"

      br()
      br()

      Table collection:users,

        each: (v) ->

          td v.get('name')

          td v.get('isApproved')

      tbName = TextBox()
      tbIsApproved = CheckBox()

      Button 'do it', click:->
        users.add (new UserModel name:tbName.value, isApproved:tbIsApproved.value)



// Generated by CoffeeScript 1.6.2
(function() {
  var commander, oj, splitAndTrim, usage, _;

  _ = require('underscore');

  commander = require('commander');

  oj = require('./server');

  module.exports = function() {
    var options;

    commander.version(oj.version).usage('[options] <file> <dir> ...').option('-m, --minify', 'Turn on minification (default: false)', false).option('-w, --watch', 'Turn on watch mode (default: off)', false).option('-r, --recurse', 'Recurse into directories (default: off)', false).option('-o, --output <dir>', 'Directory to output all files to (default: .)', process.cwd()).option('-v, --verbose <level>', 'Turn on verbose level 0-3 (default: 1)', 1).option('-e, --exclude <modules>', 'List of modules to exclude (jquery,oj,...)', splitAndTrim, []).parse(process.argv);
    if (!_.isArray(commander.args) || commander.args.length === 0) {
      usage();
    }
    options = _.pick(commander, 'args', 'minify', 'output', 'recurse', 'modules', 'verbose', 'watch', 'exclude');
    oj.command(options);
  };

  usage = function(code) {
    if (code == null) {
      code = 0;
    }
    commander.help();
    return process.exit(code);
  };

  splitAndTrim = function(str) {
    var o, out, _i, _len, _results;

    out = str.split(',');
    _results = [];
    for (_i = 0, _len = out.length; _i < _len; _i++) {
      o = out[_i];
      _results.push(o.trim());
    }
    return _results;
  };

}).call(this);
